在我们继续讨论更高级的主题之前，我们需要停下来快速了解一下可移植性问题。现代版本的 Linux 内核具有高度的可移植性，可在许多不同的架构上运行。鉴于 Linux 的多平台特性，用于严肃使用的驱动程序也应该是可移植的。

但是内核代码的一个核心问题是既能够访问已知长度的数据项（例如，文件系统数据结构或设备板上的寄存器），又能够利用不同处理器（32 位和 64 位架构，可能还有 16 位）的功能。这句话说明内核编程中的两个重要挑战：正确处理已知长度的数据结构，同时确保内核代码能够在不同的处理器架构上充分发挥作用。

内核开发人员在将 x86 代码移植到新架构时遇到的一些问题与不正确的数据类型有关。遵守严格的数据类型并使用 -Wall -Wstrict-prototypes 标志进行编译可以防止大多数错误。

内核数据使用的数据类型分为三个主要类：标准 C 类型（如 int）、显式大小的类型（如 u32）以及用于特定内核对象的类型（如 pid_t）。我们将了解何时以及如何使用这三个类型类中的每一个。本章的最后部分讨论了将驱动程序代码从 x86 移植到其他平台时可能遇到的其他一些典型问题，并介绍了对最新内核头文件导出的链表的通用支持。

如果遵循我们提供的准则，则驱动程序即使在无法测试的平台上也应编译和运行。